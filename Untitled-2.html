<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pont√£o do Cabedelo</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <link rel="stylesheet" href="styles.css"> <!-- Link to your main CSS -->
    <link rel="stylesheet" href="./WEB/css/archivo.css"> <!-- Link to your custom Archivo font CSS -->
</head>
<body>

    <div id="splashScreen">
        <video id="splashVideo" autoplay muted >
            <source src="vide.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

    <div class="wrapper" id="mainContent">
        <div class="logo-container">
            <img src="logo3.png" alt="Logo" class="logo">
        </div>

        <div class="container">
            <div id="canvasContainer" class="canvas-container"></div>
            
            <!-- Preview Zone -->
            <div id="previewZone" class="preview-zone">
                <img id="previewImage" src="" alt="Preview of Generated Image" />
            </div>

            <div class="buttons">
                <span id="generateBtn" class="button-text">Generate</span>
                <span id="downloadBtn" class="button-text" disabled>Save</span>
            </div>
        </div>

    </div>

    <script src="sketch.js"></script>
    <script>
        const splashScreen = document.getElementById('splashScreen');
        const mainContent = document.getElementById('mainContent');
        const splashVideo = document.getElementById('splashVideo');
        const previewImage = document.getElementById('previewImage');
    
        splashVideo.onended = () => {
            splashScreen.classList.add('hidden');
            mainContent.style.display = 'block'; // Show the main content
            mainContent.classList.add('visible'); // Start the fade-in
    
            // Debugging: Ensure canvas is shown and force a redraw
            console.log("Splash video ended. Showing main content...");
            canvas.show();
            redraw(); // Force redraw to ensure the canvas is rendered
        };
    
        // This function updates the preview image after the sketch is generated
        function updatePreview(imageUrl) {
            previewImage.src = imageUrl;
        }
    
        document.getElementById('generateBtn').addEventListener('click', () => {
            console.log("Generate button clicked.");
            startSketch();
        });
    
        document.getElementById('downloadBtn').addEventListener('click', () => {
            console.log("Download button clicked.");
            downloadImage();
        });
    </script>
    
    
</body>
</html>
